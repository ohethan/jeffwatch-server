(this.webpackJsonpjeffwatch=this.webpackJsonpjeffwatch||[]).push([[0],{172:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=n(70),i=n.n(c),o=(n(172),n(3)),l=n(5),u=function(e){var t=e.user,n=e.handleLogout;return Object(r.jsxs)("nav",{className:"level",children:[Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{className:"link is-info",to:"/",children:"Search"})}),Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{className:"link is-info",to:"/charts",children:"Charts"})}),Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{to:"/",children:Object(r.jsx)("img",{src:"https://i.imgur.com/HgkDDe5.png",id:"fixed-height",alt:"Jeffwatch"})})}),t&&Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{className:"link is-info",to:"/user/".concat(t.username),children:t.username})}),t&&Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{onClick:n,className:"link is-info",to:"/",children:"Logout"})}),!t&&Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{className:"link is-info",to:"/login",children:"Login"})}),!t&&Object(r.jsx)("p",{className:"level-item has-text-centered",children:Object(r.jsx)(l.a,{className:"link is-info",to:"/signup",children:"Sign Up"})})]})},j=n(2),d=n.n(j),h=n(4),b=(n(61),function(e){var t=e.id,n=e.title,a=e.year,s=e.poster,c="https://picsum.photos/300/450?blur=2";return"N/A"!==s&&(c=s),Object(r.jsxs)("div",{className:"container movie-card-search",id:"centered",children:[Object(r.jsx)(l.a,{to:"/movie/".concat(t),children:Object(r.jsxs)("h2",{className:"title",id:"blue-text",children:[n," (",a,")"]})}),Object(r.jsx)("div",{children:Object(r.jsx)(l.a,{to:"/movie/".concat(t),children:Object(r.jsx)("img",{className:"poster-size",src:c,alt:"".concat(n," poster")})})})]})}),f=function(e){var t=e.movies;return Object(r.jsx)("div",{className:"margin-breaker search-results",children:t&&0!==t.length?t.map((function(e){return Object(r.jsx)(b,{id:e.imdbID,title:e.Title,year:e.Year,poster:e.Poster},e.imdbID)})):Object(r.jsx)("h1",{children:"No Movies Found"})})},m=n(9),p=n.n(m),O=n(7),x=n.n(O),v="https://jeffwatch.herokuapp.com/api/omdb",g={omdbSearch:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(v+"/search/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),omdbGetById:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(v+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=n(72),N=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),i=Object(o.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),m=b[0],O=b[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),N=v[0],y=v[1],k=Object(a.useState)(null),S=Object(o.a)(k,2),R=(S[0],S[1]),C=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,g.omdbSearch(t);case 4:n=e.sent,u(n.data.Search),O(!1),y(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),R(e.t0),O(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),U=Object(a.useCallback)(Object(w.debounce)((function(e){return C(e)}),750),[]);return Object(r.jsxs)("div",{className:"center",children:[Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(r.jsx)("div",{className:"columns",children:Object(r.jsx)("div",{className:"column is-two-thirds is-offset-2",children:Object(r.jsx)("div",{className:"block",children:Object(r.jsx)("label",{htmlFor:"search",children:Object(r.jsx)("input",{className:"input is-info is-large is-rounded",id:"search",placeholder:"Search for a movie",value:n,autoComplete:"off",onChange:function(e){s(e.target.value),O(!0),U(e.target.value)}})})})})})}),m?Object(r.jsx)(p.a,{size:"150px",css:{display:"block",margin:"0 auto"}}):N?Object(r.jsx)(f,{movies:l}):void 0]})},y=n(12),k="https://jeffwatch.herokuapp.com/api/ratings",S=null,R={createRating:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:S}},a={movie:t,rating:n},e.next=4,x.a.post(k,a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getRating:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S}},r=k+"/".concat(t),e.next=4,x.a.get(r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateRating:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:S}},a={movie:t,rating:n},e.next=4,x.a.put(k,a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteRating:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S},data:{movie:t}},e.next=3,x.a.delete(k,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){S="Bearer ".concat(e)}},C=function(e){var t=e.initialRating,n=e.movieId,s=Object(a.useState)(null),c=Object(o.a)(s,2),i=c[0],l=c[1],u=Object(a.useState)(null),j=Object(o.a)(u,2),b=j[0],f=j[1],m=Object(a.useState)(t),O=Object(o.a)(m,2),x=O[0],v=O[1],g=Object(a.useState)(!!t),w=Object(o.a)(g,2),N=w[0],k=w[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),U=C[0],L=C[1];Object(a.useEffect)((function(){return v(t),k(!!t),function(){!1}}),[t]);var D=function(){var e=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,L(!0),N){e.next=7;break}return e.next=5,R.createRating(t,n);case 5:e.next=9;break;case 7:return e.next=9,R.updateRating(t,n);case 9:k(!0),L(!1),f(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),L(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),e.next=4,R.deleteRating(n);case 4:f(null),v(null),k(!1),L(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),L(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"ratings",children:[Object(r.jsx)(y.a,{initialRating:b||x,emptySymbol:"fa fa-star-o",fullSymbol:"fa fa-star",fractions:2,onHover:function(e){return l(e)},onChange:function(e){return D(n,e)}}),U?Object(r.jsx)(p.a,{size:"24px",css:{marginLeft:"10px"}}):Object(r.jsx)("div",{id:"rating-value",onMouseEnter:function(){return l("--")},onMouseLeave:function(){return l()},onClick:function(){return T()},children:i||b||x||"--"})]})},U=function(e){var t=e.ratings,n=Object(a.useState)([]),s=Object(o.a)(n,2),c=s[0],i=s[1];return Object(a.useEffect)((function(){i(t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})))}),[t]),Object(r.jsxs)("div",{className:"recent-movie-ratings",children:[Object(r.jsx)("h2",{children:"Recent Ratings"}),t.length<=0?Object(r.jsx)("p",{children:"No recent Ratings"}):c.map((function(e){return Object(r.jsxs)("div",{className:"recent-movie-rating",children:[Object(r.jsx)("p",{children:new Date(e.date).toLocaleString().split(", ")[0]}),Object(r.jsx)(y.a,{initialRating:e.rating,readonly:!0,emptySymbol:"fa fa-star-o",fullSymbol:"fa fa-star"}),Object(r.jsx)(l.a,{to:"/user/".concat(e.user.username),children:Object(r.jsx)("h3",{children:e.user.username})})]},e.user.username)}))]})},L={getMovieById:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://jeffwatch.herokuapp.com/api/movies/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var D=function(e){var t=e.user,n=e.id,s=Object(a.useState)(!0),c=Object(o.a)(s,2),i=c[0],l=c[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],f=j[1],m=Object(a.useState)("Click to reveal plot"),O=Object(o.a)(m,2),x=O[0],v=O[1],w=Object(a.useState)(null),N=Object(o.a)(w,2),y=N[0],k=N[1],S=Object(a.useState)(null),D=Object(o.a)(S,2),T=D[0],E=D[1],I=Object(a.useState)(null),A=Object(o.a)(I,2),W=A[0],z=A[1],J=Object(a.useState)([]),M=Object(o.a)(J,2),P=M[0],B=M[1];Object(a.useEffect)((function(){return F(n),t&&q(n),G(n),function(){!1}}),[n,t]);var F=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.omdbGetById(t);case 3:n=e.sent,f(n.data),l(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),l(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getRating(t);case 3:n=e.sent,r=null,200===n.status&&(r=n.data.rating),k(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getMovieById(t);case 3:200===(n=e.sent).status&&(n.data.avgRating&&E(n.data.avgRating),n.data.numRatings&&z(n.data.numRatings),n.data.ratings&&B(n.data.ratings)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return i?Object(r.jsx)(p.a,{size:"150px",css:{display:"block",margin:"0 auto"}}):"False"===b.Response?Object(r.jsx)("h1",{children:"Movie not found"}):Object(r.jsxs)("div",{className:"movie-card",children:[Object(r.jsxs)("div",{className:"columns",children:[Object(r.jsx)("div",{className:"column is-one-third",children:Object(r.jsx)("div",{className:"movie-poster",children:Object(r.jsx)("img",{src:b.Poster,alt:b.Title})})}),Object(r.jsxs)("div",{className:"column",id:"meta-div",children:[Object(r.jsxs)("div",{className:"movie-header",children:[Object(r.jsx)("h1",{className:"title",children:b.Title}),Object(r.jsx)("h6",{className:"subtitle",children:b.Genre})]}),Object(r.jsxs)("div",{className:"is-family-sans-serif",children:[Object(r.jsxs)("div",{className:"movie-body",children:[Object(r.jsx)("div",{className:"small-margin",children:t&&Object(r.jsx)(C,{initialRating:y,movieId:n})}),T&&W&&Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:T.toFixed(2)})," / 5.0 from ",Object(r.jsx)("strong",{children:W})," ratings"]})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsx)("p",{className:"movie-release",children:b.Released})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Runtime:"})," ",b.Runtime]})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{className:"movie-director",children:[Object(r.jsx)("strong",{children:"Director:"})," ",b.Director]})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{className:"movie-writer",children:[Object(r.jsx)("strong",{children:"Writer:"})," ",b.Writer]})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{className:"movie-actors",children:[Object(r.jsx)("strong",{children:"Actors:"})," ",b.Actors]})}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsx)("p",{onClick:function(){return v(b.Plot)},children:x})})]}),Object(r.jsx)("div",{className:"small-margin",children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Country:"})," ",b.Country," ",Object(r.jsx)("strong",{children:"Rated:"})," ",b.Rated]})})]})]})]}),Object(r.jsx)(U,{ratings:P})]})},T={login:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("https://jeffwatch.herokuapp.com/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){var t=e.handleLogin,n=Object(a.useState)(""),s=Object(o.a)(n,2),c=s[0],i=s[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],f=j[1],m=Object(a.useState)(null),p=Object(o.a)(m,2),O=p[0],x=p[1],v=function(){var e=Object(h.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,T.login({username:c,password:b});case 4:return r=e.sent,window.localStorage.setItem("loggedJeffUser",JSON.stringify(r)),t(r),e.next=9,Object(l.c)("/");case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),x("Username or password incorrect"),setTimeout((function(){x(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("section",{className:"hero is-info is-fullheight",children:Object(r.jsx)("div",{className:"hero-body",children:Object(r.jsx)("div",{className:"isCenter",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"box",children:Object(r.jsxs)("form",{onSubmit:v,children:[Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Username"}),Object(r.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(r.jsx)("input",{className:"input",type:"text",value:c,name:"username",onChange:function(e){var t=e.target;return i(t.value)},required:!0}),Object(r.jsx)("span",{className:"icon is-small is-left",children:Object(r.jsx)("i",{className:"fas fa-user"})})]})]}),Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Password"}),Object(r.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(r.jsx)("input",{className:"input",type:"password",value:b,name:"password",onChange:function(e){var t=e.target;return f(t.value)},required:!0}),Object(r.jsx)("span",{className:"icon is-small is-left",children:Object(r.jsx)("i",{className:"fas fa-lock"})})]}),Object(r.jsx)("p",{className:"help is-danger",children:O})]}),Object(r.jsx)("div",{className:"field is-grouped",children:Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("button",{className:"button is-info",type:"submit",children:"Login"})})})]})})})})})})})},I="https://jeffwatch.herokuapp.com/api/users",A={getUser:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(I+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,password:n},e.next=3,x.a.post(I,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},W=function(e){var t=e.handleLogin,n=Object(a.useState)(""),s=Object(o.a)(n,2),c=s[0],i=s[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],f=j[1],m=Object(a.useState)(""),p=Object(o.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)(null),g=Object(o.a)(v,2),w=g[0],N=g[1],y=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b===O){e.next=5;break}return N("Passwords do not match"),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 5:if(!(c.length>20)){e.next=9;break}return N("Username must be 20 characters or less"),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 9:if(!(c.length<3)){e.next=13;break}return N("Username must be 3 characters or more"),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 13:if(c.match("^[A-Za-z0-9]+$")){e.next=17;break}return N("Username can only contain characters and numbers"),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 17:if(!(b.length<6)){e.next=21;break}return N("Password must be 6 characters or more"),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 21:if(!(b.length>50)){e.next=25;break}return N("why is your password more than 50 characters..."),setTimeout((function(){N(null)}),5e3),e.abrupt("return");case 25:return e.prev=25,e.next=28,A.createUser(c,b);case 28:if(200!==e.sent.status){e.next=36;break}return e.next=32,T.login({username:c,password:b});case 32:r=e.sent,window.localStorage.setItem("loggedJeffUser",JSON.stringify(r)),t(r),Object(l.c)("/");case 36:e.next=45;break;case 38:e.prev=38,e.t0=e.catch(25),a="Error with signup",e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&e.t0.response.data.error.toLowerCase().startsWith("user validation failed")&&(a="Username is taken"),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&(a=e.t0.response.message),N(a),setTimeout((function(){N(null)}),1e4);case 45:case"end":return e.stop()}}),e,null,[[25,38]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("section",{className:"hero is-info is-fullheight",children:Object(r.jsx)("div",{className:"hero-body",children:Object(r.jsx)("div",{className:"isCenter",children:Object(r.jsx)("div",{className:"SignUp",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsxs)("form",{onSubmit:y,children:[Object(r.jsx)("div",{className:"field",children:Object(r.jsxs)("div",{className:"username-form",children:[Object(r.jsx)("label",{className:"label",children:"Username"}),Object(r.jsxs)("div",{className:"control has-icons-left",children:[Object(r.jsx)("input",{className:"input",type:"text",value:c,name:"username",onChange:function(e){var t=e.target;return i(t.value)},minLength:"3",required:!0}),Object(r.jsx)("span",{className:"icon is-small is-left",children:Object(r.jsx)("i",{className:"fas fa-user"})})]})]})}),Object(r.jsx)("div",{className:"field",children:Object(r.jsxs)("div",{className:"password-form",children:[Object(r.jsx)("label",{className:"label",children:"Password"}),Object(r.jsxs)("div",{className:"control has-icons-left",children:[Object(r.jsx)("input",{className:"input",type:"password",value:b,name:"password",onChange:function(e){var t=e.target;return f(t.value)},minLength:"6",required:!0}),Object(r.jsx)("span",{className:"icon is-small is-left",children:Object(r.jsx)("i",{className:"fas fa-lock"})})]})]})}),Object(r.jsx)("div",{className:"field",children:Object(r.jsxs)("div",{className:"password-form",children:[Object(r.jsx)("label",{className:"label",children:"Verify Password"}),Object(r.jsxs)("div",{className:"control has-icons-left",children:[Object(r.jsx)("input",{className:"input",type:"password",value:O,name:"password",onChange:function(e){var t=e.target;return x(t.value)},minLength:"6",required:!0}),Object(r.jsx)("span",{className:"icon is-small is-left",children:Object(r.jsx)("i",{className:"fas fa-lock"})}),Object(r.jsx)("p",{className:"help is-danger",children:w})]})]})}),Object(r.jsx)("div",{className:"field is-grouped",children:Object(r.jsx)("button",{className:"button is-info",type:"submit",children:"Sign Up"})})]})})})})})})})},z=function(e){var t=e.ratings,n=e.title,s=Object(a.useState)([]),c=Object(o.a)(s,2),i=c[0],u=c[1],j=Math.floor((t.length-1)/10),d=Object(a.useState)(0),h=Object(o.a)(d,2),b=h[0],f=h[1],m=Object(a.useState)(i.slice(10*b,10*(b+1))),p=Object(o.a)(m,2),O=p[0],x=p[1];Object(a.useEffect)((function(){x(i.slice(10*b,10*(b+1)))}),[b,i]),Object(a.useEffect)((function(){u(t.sort((function(e,t){return new Date(t.date)-new Date(e.date)}))),f(0)}),[t]);return t.length<=0?Object(r.jsxs)("div",{className:"recent-ratings",children:[Object(r.jsx)("div",{className:"recent-ratings-header",children:Object(r.jsx)("h2",{children:n})}),Object(r.jsx)("p",{children:"No recent ratings"})]}):Object(r.jsxs)("div",{className:"blue",children:[Object(r.jsxs)("div",{className:"recent-ratings-header",children:[Object(r.jsx)("h2",{children:n}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"button is-light",disabled:0===b,onClick:function(){f(b-1)},children:"previous"}),Object(r.jsx)("button",{className:"button is-light is-info",disabled:b===j,onClick:function(){f(b+1)},children:"next"})]})]}),O.map((function(e){return Object(r.jsxs)("div",{className:"border-rating-card",children:[Object(r.jsx)("p",{children:new Date(e.date).toLocaleString().split(", ")[0]}),Object(r.jsx)(y.a,{initialRating:e.rating,readonly:!0,emptySymbol:"fa fa-star-o",fullSymbol:"fa fa-star"}),Object(r.jsx)(l.a,{to:"/movie/".concat(e.movie.imdbId),children:Object(r.jsx)("h3",{children:e.movie.title})})]},e.id)}))]})},J=n(6),M=function(e){var t=e.ratings,n=e.showSpecificRatings,s=Object(a.useRef)(null),c=window.innerWidth<700?window.innerWidth:.6*window.innerWidth;return Object(a.useEffect)((function(){if(t&&s.current){var e=t.map((function(e){return 2*e.rating-1})).reduce((function(e,t){return e[t]++,e}),[0,0,0,0,0,0,0,0,0,0]).reverse(),r=J.d().domain(e.keys()).range([0,350]).padding(.2),a=J.b(e,(function(e){return e})),i=J.e().domain([0,a]).range([0,c-50]),o=J.f().domain(e.keys()).range(["#00ff00","#00f3a5","#00c0ff","#009cff","#4c83ff","#8761f5","#b81cd7","#ea00aa","#ff0045","#ff0000"]),l=J.h(s.current);l.selectAll("*").remove();var u=l.selectAll("g").data(e).enter().append("g").on("click",(function(){n(+this.children[1].innerHTML)})).on("mouseover",(function(e,t){J.h(this).style("cursor","pointer"),J.h(this.children[2]).style("visibility","visible")})).on("mouseout",(function(e,t){J.h(this).style("cursor","default"),J.h(this.children[2]).style("visibility","hidden")}));u.append("rect").attr("y",(function(e,t){return r(t)})).attr("x",30).attr("width",0).attr("height",30).attr("fill",(function(e,t){return o(t)})).attr("stroke","black").attr("stroke-width",2).attr("opacity",0).on("mouseover",(function(e,t){J.h(this).style("cursor","pointer").transition("20").attr("opacity",".75")})).on("mouseout",(function(e,t){J.h(this).style("cursor","default").transition("20").attr("opacity","1")})).transition().duration(750).attr("width",(function(e){return i(e)})).attr("opacity",1),u.append("text").text((function(e,t){return((10-t)/2).toFixed(1)})).attr("dy","1.2em").attr("y",(function(e,t){return r(t)})).style("font-weight","bold"),u.append("text").text((function(e,t){return e})).attr("y",(function(e,t){return r(t)})).attr("dy","1.2em").attr("dx",35).style("font-weight","bold").style("visibility","hidden")}}),[t,c,n]),Object(r.jsxs)("div",{className:"isCenter",style:{width:c,border:"1px solid",padding:"5px"},children:[Object(r.jsx)("h2",{children:Object(r.jsxs)("strong",{children:["Ratings: ",t.length]})}),Object(r.jsx)("svg",{className:"d3-component",width:c,height:350,ref:s})]})},P=function(e){var t=e.ratings,n=Object(a.useRef)(null),s=window.innerWidth<700?window.innerWidth:.6*window.innerWidth,c=.9*window.innerHeight,i=Object(a.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(a.useState)([]),h=Object(o.a)(d,2),b=h[0],f=h[1],m=Object(a.useState)([]),p=Object(o.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)([]),g=Object(o.a)(v,2),w=g[0],N=g[1],y=Object(a.useCallback)((function(e){var t=J.f(e.map((function(e){return e.genre})),J.g),r=function(e){return J.c().size([s-2,c-2]).padding(3)(J.a({children:e}).sum((function(e){return e.value})))}(e),a=J.h(n.current),i=J.i().duration(750),o=a.selectAll("circle").data(r.leaves(),(function(e){return e.data.genre})),l=a.selectAll("text").data(r.leaves(),(function(e){return e.data.genre}));o.exit().attr("fill",(function(e){return t(e.data.genre)})).transition(i).attr("r",1e-6).remove(),l.exit().transition(i).style("opacity",1e-6).remove(),o.transition(i).attr("fill",(function(e){return t(e.data.genre)})).attr("r",(function(e){return e.r})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),l.transition(i).attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).text((function(e){return e.r>40?e.data.genre:null})).style("opacity",1);var u=o.enter().append("circle");u.attr("r",(function(e){return 1e-6})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("fill","#fff").on("mouseover",(function(e,t){J.h(this).attr("fill-opacity",.7)})).on("mouseout",(function(e,t){J.h(this).attr("fill-opacity",1)})).transition(i).attr("fill",(function(e){return t(e.data.genre)})).attr("r",(function(e){return e.r})),u.append("title").text((function(e){return e.data.genre})),l.enter().append("text").style("opacity",1e-6).attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).text((function(e){return e.r>40?e.data.genre:null})).attr("text-anchor","middle").attr("dy",".35em").transition(i).style("opacity",1)}),[c,s]);return Object(a.useEffect)((function(){J.h(n.current).selectAll("*").remove(),x(t.map((function(e){return e.movie})).reduce((function(e,t){return t.genre.forEach((function(t){e.map((function(e){return e.genre})).includes(t)?e.find((function(e){return e.genre===t})).value++:e.push({genre:t,value:1})})),e}),[])),f(t.reduce((function(e,t){return t.movie.genre.forEach((function(n){e.map((function(e){return e.genre})).includes(n)?e.find((function(e){return e.genre===n})).value+=Math.pow(t.rating,5):e.push({genre:n,value:Math.pow(t.rating,5)})})),e}),[]))}),[t]),Object(a.useEffect)((function(){N(u?b:O),y(w)}),[w,y,O,u,b]),Object(r.jsxs)("div",{className:"genre-chart isCenter",style:{width:s,height:c},children:[Object(r.jsx)("h2",{children:"Genres"}),Object(r.jsx)("p",{children:"Shows the amount of movies watched for each genre. The larger the circle, the more movies. Apply the rating weighting to also take into account the users ratings of movies."}),Object(r.jsxs)("label",{htmlFor:"showRatingWeighting",className:"checkbox",children:[Object(r.jsx)("input",{type:"checkbox",checked:u,id:"showRatingWeighting",onChange:function(){j(!u)}}),"Apply Rating Weighting"]}),Object(r.jsx)("svg",{className:"d3-bubbles",width:s,height:c,ref:n})]})},B=function(e){var t=e.user,n=Object(a.useState)(!0),s=Object(o.a)(n,2),c=s[0],i=s[1],l=Object(a.useState)(null),u=Object(o.a)(l,2),j=u[0],b=u[1],f=Object(a.useState)(null),m=Object(o.a)(f,2),O=m[0],x=m[1];Object(a.useEffect)((function(){v(t)}),[t]);var v=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getUser(t);case 3:200===(n=e.sent).status&&b(n.data),i(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),i(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"profile-page",children:[j&&j.username?Object(r.jsxs)("h1",{className:"title is-family-monospace has-text-info has-text-centered",children:[j.username,"'s Profile"]}):Object(r.jsx)("h1",{children:"User not found"}),Object(r.jsx)(p.a,{size:"150px",css:{display:"block",margin:"0 auto"},loading:c}),j&&Object(r.jsx)(M,{ratings:j.ratings,showSpecificRatings:function(e){var n=j.ratings.filter((function(t){return t.rating===e}));x(Object(r.jsx)(z,{ratings:n,title:"".concat(t,"'s ").concat(e," star ratings")}))}}),O,j&&Object(r.jsx)(z,{ratings:j.ratings,title:"".concat(t,"'s recent ratings")}),j&&Object(r.jsx)(P,{ratings:j.ratings})]})},F=function(e){var t=e.movie,n=t.numRatings,a=t.avgRating,s=t.genre,c=t.imdbId,i=t.poster,o=t.title,u=t.releaseDate;return Object(r.jsxs)("div",{className:"chart-item",children:[Object(r.jsx)(l.a,{to:"/movie/".concat(c),children:Object(r.jsx)("img",{src:i,alt:o})}),Object(r.jsxs)("div",{className:"chart-item-info",children:[Object(r.jsx)(l.a,{to:"/movie/".concat(c),children:Object(r.jsx)("h3",{children:o})}),Object(r.jsx)("p",{children:new Date(u).toLocaleString().split(", ")[0]}),Object(r.jsx)("p",{children:s.join(", ")})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:a.toFixed(2)})," / 5.0 from ",Object(r.jsx)("strong",{children:n})," ratings"]})})]})},q={getChart:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://jeffwatch.herokuapp.com/api/charts");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},G=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1];Object(a.useEffect)((function(){c()}),[]);var c=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getChart();case 3:t=e.sent,s(t.sort((function(e,t){return t.avgRating-e.avgRating||t.numRatings-e.numRatings}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"charts",children:[Object(r.jsx)("h1",{className:"title",children:"Top Ratings from JeffWatch Users"}),Object(r.jsx)("div",{className:"chart-list",children:n.map((function(e){return Object(r.jsx)(F,{movie:e},e.imdbId)}))})]})};n(202);var H=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],s=t[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedJeffUser");if(e){var t=JSON.parse(e);s(t),R.setToken(t.token)}}),[]);var c=function(e){s(e),R.setToken(e.token)};return Object(r.jsxs)("div",{id:"app",children:[Object(r.jsx)(u,{user:n,handleLogout:function(){s(null),window.localStorage.removeItem("loggedJeffUser")}}),Object(r.jsxs)(l.b,{children:[Object(r.jsx)(N,{path:"/"}),Object(r.jsx)(D,{path:"/movie/:id",user:n}),Object(r.jsx)(E,{path:"/login",handleLogin:c}),Object(r.jsx)(W,{path:"/signup",handleLogin:c}),Object(r.jsx)(G,{path:"/charts"}),Object(r.jsx)(B,{path:"/user/:user"})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(H,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[203,1,2]]]);
//# sourceMappingURL=main.102debe8.chunk.js.map